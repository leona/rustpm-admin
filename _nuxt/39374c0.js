(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{428:function(t,e,n){var content=n(460);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("5f82c756",content,!0,{sourceMap:!1})},429:function(t,e,n){var content=n(463);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("a7648a8e",content,!0,{sourceMap:!1})},458:function(t,e,n){"use strict";t.exports=n(473)},459:function(t,e,n){"use strict";n(428)},460:function(t,e,n){var r=n(14)(!1);r.push([t.i,".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;-ms-scroll-chaining:contain auto;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}",""]),t.exports=r},461:function(t,e,n){"use strict";t.exports=n(474)},462:function(t,e,n){"use strict";n(429)},463:function(t,e,n){var r=n(14)(!1);r.push([t.i,".files-page .p-card{position:relative}.files-page .add-file{position:absolute;right:2rem;top:1.5rem;z-index:10000}",""]),t.exports=r},473:function(t,e,n){"use strict";n.r(e);n(32),n(10),n(21);var r=n(4),l=n.n(r),o=n(18),c=n.n(o),d=n(9),f={props:{activeIndex:{type:Number,default:0},scrollable:{type:Boolean,default:!1}},data:function(){return{allChildren:[],d_activeIndex:this.activeIndex,backwardIsDisabled:!0,forwardIsDisabled:!1}},watch:{activeIndex:function(t){this.d_activeIndex=t,this.updateScrollBar(t)}},mounted:function(){this.allChildren=this.$children,this.updateInkBar()},updated:function(){this.updateInkBar()},methods:{onTabClick:function(t,i){this.isTabDisabled(this.tabs[i])||i===this.d_activeIndex||(this.d_activeIndex=i,this.$emit("update:activeIndex",this.d_activeIndex),this.$emit("tab-change",{originalEvent:t,index:i}),this.updateScrollBar(i)),this.$emit("tab-click",{originalEvent:t,index:i})},onTabKeydown:function(t,i){13===t.which&&this.onTabClick(t,i)},updateInkBar:function(){if(this.$refs.nav.children.length>1){var t=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=l.a.getWidth(t)+"px",this.$refs.inkbar.style.left=l.a.getOffset(t).left-l.a.getOffset(this.$refs.nav).left+"px"}},updateScrollBar:function(t){this.$refs.nav.children[t].scrollIntoView({block:"nearest"})},updateButtonState:function(){var content=this.$refs.content,t=content.scrollLeft,e=content.scrollWidth,n=l.a.getWidth(content);this.backwardIsDisabled=0===t,this.forwardIsDisabled=t===e-n},getKey:function(t,e){return t.header?c.a.resolveFieldData(t,t.header):e},isTabDisabled:function(t){return t.disabled},onScroll:function(t){this.scrollable&&this.updateButtonState(),t.preventDefault()},getVisibleButtonWidths:function(){var t=this.$refs;return[t.prevBtn,t.nextBtn].reduce((function(t,e){return e?t+l.a.getWidth(e):t}),0)},navBackward:function(){var content=this.$refs.content,t=l.a.getWidth(content)-this.getVisibleButtonWidths(),e=content.scrollLeft-t;content.scrollLeft=e<=0?0:e},navForward:function(){var content=this.$refs.content,t=l.a.getWidth(content)-this.getVisibleButtonWidths(),e=content.scrollLeft+t,n=content.scrollWidth-t;content.scrollLeft=e>=n?n:e}},computed:{contentClasses:function(){return["p-tabview p-component",{"p-tabview-scrollable":this.scrollable}]},prevButtonClasses:function(){return["p-tabview-nav-prev p-tabview-nav-btn p-link",{"p-disabled":this.backwardIsDisabled}]},nextButtonClasses:function(){return["p-tabview-nav-next p-tabview-nav-btn p-link",{"p-disabled":this.forwardIsDisabled}]},tabs:function(){var t=[];return this.allChildren&&(t=this.allChildren.filter((function(t){return-1!==t.$vnode.tag.indexOf("tabpanel")}))),t}},components:{TabPanelHeaderSlot:{functional:!0,props:{tab:{type:null,default:null}},render:function(t,e){return[e.props.tab.$scopedSlots.header()]}}},directives:{ripple:n.n(d).a}},v=(n(459),n(1)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.contentClasses},[n("div",{staticClass:"p-tabview-nav-container"},[t.scrollable&&!t.backwardIsDisabled?n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],ref:"prevBtn",class:t.prevButtonClasses,attrs:{disabled:t.backwardIsDisabled,type:"button"},on:{click:t.navBackward}},[n("span",{staticClass:"pi pi-chevron-left"})]):t._e(),t._v(" "),n("div",{ref:"content",staticClass:"p-tabview-nav-content",on:{scroll:t.onScroll}},[n("ul",{ref:"nav",staticClass:"p-tabview-nav",attrs:{role:"tablist"}},[t._l(t.tabs,(function(e,i){return n("li",{key:t.getKey(e,i),class:[{"p-highlight":t.d_activeIndex===i,"p-disabled":t.isTabDisabled(e)}],attrs:{role:"presentation"}},[n("a",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"p-tabview-nav-link",attrs:{role:"tab",tabindex:t.isTabDisabled(e)?null:"0","aria-selected":t.d_activeIndex},on:{click:function(e){return t.onTabClick(e,i)},keydown:function(e){return t.onTabKeydown(e,i)}}},[e.header?n("span",{staticClass:"p-tabview-title"},[t._v(t._s(e.header))]):t._e(),t._v(" "),e.$scopedSlots.header?n("TabPanelHeaderSlot",{attrs:{tab:e}}):t._e()],1)])})),t._v(" "),n("li",{ref:"inkbar",staticClass:"p-tabview-ink-bar"})],2)]),t._v(" "),t.scrollable&&!t.forwardIsDisabled?n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],ref:"nextBtn",class:t.nextButtonClasses,attrs:{disabled:t.forwardIsDisabled,type:"button"},on:{click:t.navForward}},[n("span",{staticClass:"pi pi-chevron-right"})]):t._e()]),t._v(" "),n("div",{staticClass:"p-tabview-panels"},[t._t("default")],2)])}),[],!1,null,null,null);e.default=component.exports},474:function(t,e,n){"use strict";n.r(e);n(10),n(28),n(73),n(83);var r={name:"tabpanel",props:{header:null,disabled:Boolean},data:function(){return{index:null}},created:function(){var t=this;this.$parent.$children.forEach((function(e,i){e===t&&(t.index=i)}))},methods:{isTabActive:function(){var t=this.$parent.d_activeIndex;return this.$parent.multiple?t&&t.includes(this.index):this.index===t}}},l=n(1),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.isTabActive(),expression:"isTabActive()"}],staticClass:"p-tabview-panel",attrs:{role:"tabpanel"}},[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},477:function(t,e,n){"use strict";n.r(e);n(26),n(21),n(10),n(45),n(28),n(46);var r=n(17),l=(n(35),n(424)),o=n.n(l),c=n(427),d=n.n(c),f=n(458),v=n.n(f),h=n(461),w=n.n(h),x=n(60),m=n(102);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var _={computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(x.c)("server",["server"])),components:{DataTable:o.a,Column:d.a,TabView:v.a,TabPanel:w.a},data:function(){return{loading:!1,files:{},activeIndex:0,selectedGroup:null}},mounted:function(){this.server.address&&this.fetchFiles()},methods:{onAddFile:function(){var t=Object.keys(this.files)[this.activeIndex];this.$router.push({path:"/files/edit",query:{group:t,server:this.$route.query.server}})},onDeleteFile:function(t,path){var e=this;confirm("Are you sure you want to delete ".concat(path,"?"))&&this.$rustpm.delete("file",{group:t,path:path}).then((function(){e.$toast.error("Deleted ".concat(path),{position:"bottom-right",duration:5e3}),e.fetchFiles()})).catch((function(){e.$toast.info("Failed to delete ".concat(path),{position:"bottom-right",duration:5e3})}))},capitalise:function(t){return Object(m.a)(t)},fetchFiles:function(){var t=this;this.$rustpm.get("files").then((function(e){console.log("Got files:",e.data),t.files=e.data}))}},watch:{server:function(){this.fetchFiles()}}},k=_,I=(n(462),n(1)),component=Object(I.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"files-page"},[n("div",{staticClass:"p-card p-p-5"},[n("Button",{staticClass:"p-button-info add-file",on:{click:t.onAddFile}},[t._v("Add file")]),t._v(" "),n("TabView",{attrs:{activeIndex:t.activeIndex},on:{"update:activeIndex":function(e){t.activeIndex=e},"update:active-index":function(e){t.activeIndex=e}}},t._l(t.files,(function(e,r){return n("TabPanel",{key:r,attrs:{header:t.capitalise(r)}},[n("DataTable",{attrs:{value:e,dataKey:"path",loading:t.loading},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v("\n              No records found.\n          ")]},proxy:!0}],null,!0)},[n("Column",{attrs:{field:"path",header:"Path"}}),t._v(" "),n("Column",{attrs:{field:"lastUpdated",header:"Last modified"}}),t._v(" "),n("Column",{attrs:{field:"size",header:"Size"}}),t._v(" "),n("Column",{scopedSlots:t._u([{key:"body",fn:function(e){return[n("NuxtLink",{attrs:{to:{path:"/files/edit",query:{group:r,path:e.data.path,server:t.$route.query.server}}}},[n("Button",{staticClass:"p-button-info p-mr-2",attrs:{type:"button",icon:"pi pi-code"}})],1),t._v(" "),n("Button",{staticClass:"p-button-danger",attrs:{type:"button",icon:"pi pi-trash"},on:{click:function(n){return t.onDeleteFile(r,e.data.path)}}})]}}],null,!0)})],1)],1)})),1)],1)])}),[],!1,null,null,null);e.default=component.exports}}]);